<!DOCTYPE html>
<html lang="pt-br"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{template.html}">
<body>
<div layout:fragment="conteudo">
    <style>
        .dev-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .dev-section {
            background: white;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .dev-section h2 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .dev-section h3 {
            color: #34495e;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        .dev-section h4 {
            color: #7f8c8d;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        .code-block {
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
        }
        .endpoint {
            background: #e8f4f8;
            padding: 8px 12px;
            border-radius: 4px;
            display: inline-block;
            margin: 5px 0;
            font-family: monospace;
        }
        .method {
            font-weight: bold;
            color: #27ae60;
            margin-right: 10px;
        }
        .method.post { color: #f39c12; }
        .method.put { color: #3498db; }
        .method.delete { color: #e74c3c; }
        .description {
            color: #555;
            line-height: 1.6;
            margin: 10px 0;
        }
        .table-container {
            overflow-x: auto;
            margin: 15px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }
        th {
            background: #34495e;
            color: white;
            padding: 12px;
            text-align: left;
        }
        td {
            padding: 10px 12px;
            border-bottom: 1px solid #ddd;
        }
        tr:hover {
            background: #f5f5f5;
        }
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 0.85em;
            font-weight: bold;
            margin-right: 5px;
        }
        .badge-rest { background: #3498db; color: white; }
        .badge-view { background: #27ae60; color: white; }
        .badge-query { background: #9b59b6; color: white; }
        .badge-derived { background: #f39c12; color: white; }
        .badge-jpql { background: #e67e22; color: white; }
        .badge-native { background: #c0392b; color: white; }
        ul {
            line-height: 1.8;
        }
        .highlight {
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 3px;
        }
    </style>

    <div class="dev-container">
        <div class="dev-section">
            <h2>üìö Documenta√ß√£o T√©cnica - Sistema de Biblioteca</h2>
            <p class="description">
                Esta p√°gina cont√©m a documenta√ß√£o completa do sistema, incluindo explica√ß√µes detalhadas sobre
                controllers, repositories, queries e views. Destinada a desenvolvedores e testadores.
            </p>
        </div>

        <div class="dev-section">
            <h2>üéÆ Controllers</h2>
            <p class="description">
                Os controllers s√£o respons√°veis por receber requisi√ß√µes HTTP e coordenar a l√≥gica de neg√≥cio.
                O sistema possui dois tipos: <strong>REST Controllers</strong> (API JSON) e <strong>View Controllers</strong> (p√°ginas HTML).
            </p>

            <h3>1. AutorController <span class="badge badge-rest">REST API</span></h3>
            <p class="description">
                Controller REST que gerencia opera√ß√µes CRUD de autores atrav√©s de endpoints JSON.
                Implementa valida√ß√£o de dados e verifica√ß√£o de integridade referencial antes de deletar.
            </p>
            <div class="table-container">
                <table>
                    <tr>
                        <th>Endpoint</th>
                        <th>M√©todo</th>
                        <th>Descri√ß√£o</th>
                    </tr>
                    <tr>
                        <td><code>/autores</code></td>
                        <td><span class="method">GET</span></td>
                        <td>Lista todos os autores cadastrados</td>
                    </tr>
                    <tr>
                        <td><code>/autores/{id}</code></td>
                        <td><span class="method">GET</span></td>
                        <td>Busca um autor espec√≠fico por ID</td>
                    </tr>
                    <tr>
                        <td><code>/autores</code></td>
                        <td><span class="method post">POST</span></td>
                        <td>Cria um novo autor (valida @NotBlank no nome)</td>
                    </tr>
                    <tr>
                        <td><code>/autores/{id}</code></td>
                        <td><span class="method put">PUT</span></td>
                        <td>Atualiza dados de um autor existente</td>
                    </tr>
                    <tr>
                        <td><code>/autores/{id}</code></td>
                        <td><span class="method delete">DELETE</span></td>
                        <td>Remove autor (verifica se n√£o h√° livros associados)</td>
                    </tr>
                </table>
            </div>
            <div class="code-block">
                <strong>Prote√ß√£o de Integridade:</strong><br>
                Antes de deletar um autor, o sistema verifica se existem livros associados.<br>
                Se houver, lan√ßa DataIntegrityException impedindo a exclus√£o.
            </div>

            <h3>2. EditoraController <span class="badge badge-rest">REST API</span></h3>
            <p class="description">
                Controller REST para gerenciamento de editoras. Implementa opera√ß√µes CRUD completas
                com valida√ß√£o de dados de entrada.
            </p>
            <div class="table-container">
                <table>
                    <tr>
                        <th>Endpoint</th>
                        <th>M√©todo</th>
                        <th>Descri√ß√£o</th>
                    </tr>
                    <tr>
                        <td><code>/editoras</code></td>
                        <td><span class="method">GET</span></td>
                        <td>Lista todas as editoras cadastradas</td>
                    </tr>
                    <tr>
                        <td><code>/editoras/{id}</code></td>
                        <td><span class="method">GET</span></td>
                        <td>Busca uma editora espec√≠fica por ID</td>
                    </tr>
                    <tr>
                        <td><code>/editoras</code></td>
                        <td><span class="method post">POST</span></td>
                        <td>Cria uma nova editora (valida @NotBlank no nome)</td>
                    </tr>
                    <tr>
                        <td><code>/editoras/{id}</code></td>
                        <td><span class="method put">PUT</span></td>
                        <td>Atualiza dados de uma editora existente</td>
                    </tr>
                    <tr>
                        <td><code>/editoras/{id}</code></td>
                        <td><span class="method delete">DELETE</span></td>
                        <td>Remove uma editora do sistema</td>
                    </tr>
                </table>
            </div>

            <h3>3. LivroController <span class="badge badge-rest">REST API</span></h3>
            <p class="description">
                Controller REST mais complexo, gerencia livros e seus relacionamentos com autores e editoras.
                Utiliza DTO (LivroDTO) para receber dados e valida a exist√™ncia de autor e editora antes de criar/atualizar.
            </p>
            <div class="table-container">
                <table>
                    <tr>
                        <th>Endpoint</th>
                        <th>M√©todo</th>
                        <th>Descri√ß√£o</th>
                    </tr>
                    <tr>
                        <td><code>/livros</code></td>
                        <td><span class="method">GET</span></td>
                        <td>Lista todos os livros com autor e editora</td>
                    </tr>
                    <tr>
                        <td><code>/livros/{id}</code></td>
                        <td><span class="method">GET</span></td>
                        <td>Busca um livro espec√≠fico por ID</td>
                    </tr>
                    <tr>
                        <td><code>/livros/search?titulo=X</code></td>
                        <td><span class="method">GET</span></td>
                        <td>Busca livros por t√≠tulo (derived query)</td>
                    </tr>
                    <tr>
                        <td><code>/livros</code></td>
                        <td><span class="method post">POST</span></td>
                        <td>Cria novo livro vinculando autor e editora</td>
                    </tr>
                    <tr>
                        <td><code>/livros/{id}</code></td>
                        <td><span class="method put">PUT</span></td>
                        <td>Atualiza livro e seus relacionamentos</td>
                    </tr>
                    <tr>
                        <td><code>/livros/{id}</code></td>
                        <td><span class="method delete">DELETE</span></td>
                        <td>Remove um livro do sistema</td>
                    </tr>
                </table>
            </div>
            <div class="code-block">
                <strong>Uso de DTO:</strong><br>
                LivroDTO cont√©m: titulo, anoPublicacao, isbn, autorId, editoraId<br>
                O controller valida se autor e editora existem antes de salvar.
            </div>

            <h3>4. AutorViewController <span class="badge badge-view">VIEW</span></h3>
            <p class="description">
                Controller de visualiza√ß√£o para interface web de autores. Renderiza p√°ginas HTML usando Thymeleaf
                e gerencia formul√°rios de cria√ß√£o/edi√ß√£o.
            </p>
            <div class="table-container">
                <table>
                    <tr>
                        <th>Rota</th>
                        <th>M√©todo</th>
                        <th>View</th>
                        <th>Descri√ß√£o</th>
                    </tr>
                    <tr>
                        <td><code>/autores/view</code></td>
                        <td>GET</td>
                        <td>autores-lista.html</td>
                        <td>Exibe lista de todos os autores</td>
                    </tr>
                    <tr>
                        <td><code>/autores/formulario</code></td>
                        <td>GET</td>
                        <td>autores-form.html</td>
                        <td>Exibe formul√°rio para novo autor</td>
                    </tr>
                    <tr>
                        <td><code>/autores/editar/{id}</code></td>
                        <td>GET</td>
                        <td>autores-form.html</td>
                        <td>Exibe formul√°rio preenchido para edi√ß√£o</td>
                    </tr>
                    <tr>
                        <td><code>/autores/salvar</code></td>
                        <td>POST</td>
                        <td>redirect</td>
                        <td>Salva/atualiza autor e redireciona para lista</td>
                    </tr>
                    <tr>
                        <td><code>/autores/deletar/{id}</code></td>
                        <td>GET</td>
                        <td>redirect</td>
                        <td>Deleta autor e redireciona para lista</td>
                    </tr>
                </table>
            </div>

            <h3>5. EditoraViewController <span class="badge badge-view">VIEW</span></h3>
            <p class="description">
                Controller de visualiza√ß√£o para interface web de editoras. Estrutura id√™ntica ao AutorViewController,
                mas gerencia entidades Editora.
            </p>
            <div class="table-container">
                <table>
                    <tr>
                        <th>Rota</th>
                        <th>M√©todo</th>
                        <th>View</th>
                        <th>Descri√ß√£o</th>
                    </tr>
                    <tr>
                        <td><code>/editoras/view</code></td>
                        <td>GET</td>
                        <td>editoras-lista.html</td>
                        <td>Exibe lista de todas as editoras</td>
                    </tr>
                    <tr>
                        <td><code>/editoras/formulario</code></td>
                        <td>GET</td>
                        <td>editoras-form.html</td>
                        <td>Exibe formul√°rio para nova editora</td>
                    </tr>
                    <tr>
                        <td><code>/editoras/editar/{id}</code></td>
                        <td>GET</td>
                        <td>editoras-form.html</td>
                        <td>Exibe formul√°rio preenchido para edi√ß√£o</td>
                    </tr>
                    <tr>
                        <td><code>/editoras/salvar</code></td>
                        <td>POST</td>
                        <td>redirect</td>
                        <td>Salva/atualiza editora e redireciona</td>
                    </tr>
                    <tr>
                        <td><code>/editoras/deletar/{id}</code></td>
                        <td>GET</td>
                        <td>redirect</td>
                        <td>Deleta editora e redireciona</td>
                    </tr>
                </table>
            </div>

            <h3>6. LivroViewController <span class="badge badge-view">VIEW</span></h3>
            <p class="description">
                Controller de visualiza√ß√£o para livros. Mais complexo que os outros view controllers pois precisa
                carregar listas de autores e editoras para os dropdowns do formul√°rio.
            </p>
            <div class="table-container">
                <table>
                    <tr>
                        <th>Rota</th>
                        <th>M√©todo</th>
                        <th>View</th>
                        <th>Descri√ß√£o</th>
                    </tr>
                    <tr>
                        <td><code>/livros/view</code></td>
                        <td>GET</td>
                        <td>livros-lista.html</td>
                        <td>Exibe lista de todos os livros</td>
                    </tr>
                    <tr>
                        <td><code>/livros/formulario</code></td>
                        <td>GET</td>
                        <td>livros-form.html</td>
                        <td>Formul√°rio com dropdowns de autores/editoras</td>
                    </tr>
                    <tr>
                        <td><code>/livros/editar/{id}</code></td>
                        <td>GET</td>
                        <td>livros-form.html</td>
                        <td>Formul√°rio preenchido para edi√ß√£o</td>
                    </tr>
                    <tr>
                        <td><code>/livros/salvar</code></td>
                        <td>POST</td>
                        <td>redirect</td>
                        <td>Salva livro vinculando autor e editora</td>
                    </tr>
                    <tr>
                        <td><code>/livros/deletar/{id}</code></td>
                        <td>GET</td>
                        <td>redirect</td>
                        <td>Deleta livro e redireciona</td>
                    </tr>
                </table>
            </div>
            <div class="code-block">
                <strong>Diferencial:</strong><br>
                Recebe par√¢metros separados (@RequestParam) em vez de objeto completo<br>
                Busca autor e editora pelos IDs e vincula ao livro antes de salvar
            </div>

            <h3>7. QueryController <span class="badge badge-query">QUERIES</span></h3>
            <p class="description">
                Controller especializado em executar e demonstrar diferentes tipos de queries do Spring Data JPA.
                Oferece tanto endpoints REST quanto interface web para visualiza√ß√£o de resultados.
            </p>
            <h4>Endpoints REST (API JSON):</h4>
            <div class="table-container">
                <table>
                    <tr>
                        <th>Endpoint</th>
                        <th>Tipo Query</th>
                        <th>Descri√ß√£o</th>
                    </tr>
                    <tr>
                        <td><code>/queries/api/derived/autores-por-nome</code></td>
                        <td><span class="badge badge-derived">Derived</span></td>
                        <td>Busca autores por nome (parcial)</td>
                    </tr>
                    <tr>
                        <td><code>/queries/api/derived/autores-por-pais</code></td>
                        <td><span class="badge badge-derived">Derived</span></td>
                        <td>Busca autores por pa√≠s</td>
                    </tr>
                    <tr>
                        <td><code>/queries/api/jpql/livros-por-autor</code></td>
                        <td><span class="badge badge-jpql">JPQL</span></td>
                        <td>Lista livros de um autor espec√≠fico</td>
                    </tr>
                    <tr>
                        <td><code>/queries/api/jpql/estatisticas-editora</code></td>
                        <td><span class="badge badge-jpql">JPQL</span></td>
                        <td>Estat√≠sticas de autores por editora</td>
                    </tr>
                    <tr>
                        <td><code>/queries/api/native/contar-livros-editora</code></td>
                        <td><span class="badge badge-native">Native</span></td>
                        <td>Conta livros de uma editora (SQL puro)</td>
                    </tr>
                    <tr>
                        <td><code>/queries/api/jpql/livros-por-editora</code></td>
                        <td><span class="badge badge-jpql">JPQL</span></td>
                        <td>Lista livros de uma editora</td>
                    </tr>
                </table>
            </div>
            <h4>Rotas de Visualiza√ß√£o Web:</h4>
            <ul>
                <li><code>/queries</code> - P√°gina principal com formul√°rios para todas as queries</li>
                <li><code>/queries/executar/*</code> - Endpoints POST que executam queries e exibem resultados</li>
            </ul>
            <div class="code-block">
                <strong>M√©todo prepararModel():</strong><br>
                Carrega dados necess√°rios para os dropdowns (autores, editoras, pa√≠ses)<br>
                Chamado antes de renderizar a p√°gina para garantir dados dispon√≠veis
            </div>

            <h3>8. HomeController <span class="badge badge-view">VIEW</span></h3>
            <p class="description">
                Controller simples que renderiza a p√°gina inicial do sistema.
            </p>
            <div class="code-block">
                GET / ‚Üí templates/index.html (p√°gina inicial com cards de navega√ß√£o)
            </div>

            <h3>9. SeedController <span class="badge badge-view">VIEW</span></h3>
            <p class="description">
                Controller para gerenciamento de dados de teste. Permite popular o banco com dados de exemplo
                ou limpar todos os dados. √ötil para desenvolvimento e testes.
            </p>
            <div class="table-container">
                <table>
                    <tr>
                        <th>Rota</th>
                        <th>M√©todo</th>
                        <th>Descri√ß√£o</th>
                    </tr>
                    <tr>
                        <td><code>/seed</code></td>
                        <td>GET</td>
                        <td>Exibe p√°gina com contadores e bot√µes</td>
                    </tr>
                    <tr>
                        <td><code>/seed/populate</code></td>
                        <td>POST</td>
                        <td>Popula banco com 5 autores, 4 editoras e 12 livros</td>
                    </tr>
                    <tr>
                        <td><code>/seed/clear</code></td>
                        <td>POST</td>
                        <td>Limpa todos os dados (respeita foreign keys)</td>
                    </tr>
                </table>
            </div>
            <div class="code-block">
                <strong>Dados de Exemplo:</strong><br>
                Autores: Machado de Assis, Jos√© Saramago, Clarice Lispector, Fernando Pessoa, Jorge Amado<br>
                Editoras: Companhia das Letras, Porto Editora, Record, Globo Livros<br>
                Livros: Dom Casmurro, Ensaio sobre a Cegueira, A Hora da Estrela, etc.
            </div>
        </div>

        <div class="dev-section">
            <h2>üóÑÔ∏è Repositories</h2>
            <p class="description">
                Repositories s√£o interfaces que estendem JpaRepository e fornecem m√©todos para acesso ao banco de dados.
                O Spring Data JPA implementa automaticamente os m√©todos CRUD b√°sicos e permite criar queries customizadas.
            </p>

            <h3>1. AutorRepository</h3>
            <p class="description">
                Interface para acesso aos dados de autores. Al√©m dos m√©todos herdados de JpaRepository
                (save, findAll, findById, delete, etc.), possui queries customizadas.
            </p>
            <div class="code-block">
                <strong>M√©todos Herdados (JpaRepository):</strong><br>
                ‚Ä¢ save(Autor) - Salva ou atualiza<br>
                ‚Ä¢ findAll() - Lista todos<br>
                ‚Ä¢ findById(Long) - Busca por ID<br>
                ‚Ä¢ deleteById(Long) - Deleta por ID<br>
                ‚Ä¢ count() - Conta total de registros
            </div>
            <h4>Queries Customizadas:</h4>
            <div class="table-container">
                <table>
                    <tr>
                        <th>M√©todo</th>
                        <th>Tipo</th>
                        <th>Descri√ß√£o</th>
                    </tr>
                    <tr>
                        <td><code>findByNomeContainingIgnoreCase(String nome)</code></td>
                        <td><span class="badge badge-derived">Derived Query</span></td>
                        <td>Busca autores cujo nome contenha o texto (case-insensitive)</td>
                    </tr>
                    <tr>
                        <td><code>findByPaisIgnoreCase(String pais)</code></td>
                        <td><span class="badge badge-derived">Derived Query</span></td>
                        <td>Busca autores de um pa√≠s espec√≠fico (case-insensitive)</td>
                    </tr>
                </table>
            </div>
            <div class="code-block">
                <strong>Derived Queries:</strong><br>
                O Spring Data JPA gera automaticamente a implementa√ß√£o baseado no nome do m√©todo.<br>
                "findBy" + "Nome" + "Containing" + "IgnoreCase" ‚Üí WHERE LOWER(nome) LIKE LOWER('%texto%')
            </div>

            <h3>2. EditoraRepository</h3>
            <p class="description">
                Interface para acesso aos dados de editoras. Estrutura similar ao AutorRepository.
            </p>
            <div class="code-block">
                <strong>M√©todos Herdados (JpaRepository):</strong><br>
                ‚Ä¢ save(Editora) - Salva ou atualiza<br>
                ‚Ä¢ findAll() - Lista todas<br>
                ‚Ä¢ findById(Long) - Busca por ID<br>
                ‚Ä¢ deleteById(Long) - Deleta por ID<br>
                ‚Ä¢ count() - Conta total de registros
            </div>
            <h4>Queries Customizadas:</h4>
            <div class="table-container">
                <table>
                    <tr>
                        <th>M√©todo</th>
                        <th>Tipo</th>
                        <th>Descri√ß√£o</th>
                    </tr>
                    <tr>
                        <td><code>findByNomeContainingIgnoreCase(String nome)</code></td>
                        <td><span class="badge badge-derived">Derived Query</span></td>
                        <td>Busca editoras cujo nome contenha o texto</td>
                    </tr>
                </table>
            </div>

            <h3>3. LivroRepository</h3>
            <p class="description">
                Repository mais complexo, cont√©m exemplos de Derived Queries, JPQL e Native Queries.
                Demonstra diferentes formas de consultar dados no Spring Data JPA.
            </p>
            <div class="code-block">
                <strong>M√©todos Herdados (JpaRepository):</strong><br>
                ‚Ä¢ save(Livro) - Salva ou atualiza<br>
                ‚Ä¢ findAll() - Lista todos<br>
                ‚Ä¢ findById(Long) - Busca por ID<br>
                ‚Ä¢ deleteById(Long) - Deleta por ID<br>
                ‚Ä¢ count() - Conta total de registros
            </div>
            <h4>Queries Customizadas:</h4>
            <div class="table-container">
                <table>
                    <tr>
                        <th>M√©todo</th>
                        <th>Tipo</th>
                        <th>Descri√ß√£o</th>
                        <th>Detalhes</th>
                    </tr>
                    <tr>
                        <td><code>findByTituloContainingIgnoreCase</code></td>
                        <td><span class="badge badge-derived">Derived</span></td>
                        <td>Busca livros por t√≠tulo (parcial)</td>
                        <td>Gerado automaticamente pelo Spring</td>
                    </tr>
                    <tr>
                        <td><code>findByAutorIdJPQL</code></td>
                        <td><span class="badge badge-jpql">JPQL</span></td>
                        <td>Lista livros de um autor</td>
                        <td>SELECT l FROM Livro l WHERE l.autor.id = :autorId</td>
                    </tr>
                    <tr>
                        <td><code>findByEditoraIdJPQL</code></td>
                        <td><span class="badge badge-jpql">JPQL</span></td>
                        <td>Lista livros de uma editora</td>
                        <td>SELECT l FROM Livro l WHERE l.editora.id = :editoraId</td>
                    </tr>
                    <tr>
                        <td><code>listarQuantidadeDeLivrosPorEditora</code></td>
                        <td><span class="badge badge-jpql">JPQL</span></td>
                        <td>Estat√≠sticas de livros por editora</td>
                        <td>Usa GROUP BY e COUNT, retorna proje√ß√£o</td>
                    </tr>
                    <tr>
                        <td><code>listarQuantidadeDeAutoresPorEditora</code></td>
                        <td><span class="badge badge-jpql">JPQL</span></td>
                        <td>Estat√≠sticas de autores por editora</td>
                        <td>Usa COUNT(DISTINCT) e GROUP BY</td>
                    </tr>
                    <tr>
                        <td><code>countByEditoraIdNative</code></td>
                        <td><span class="badge badge-native">Native</span></td>
                        <td>Conta livros de uma editora</td>
                        <td>SQL puro: SELECT COUNT(*) FROM livro WHERE editora_id = ?</td>
                    </tr>
                </table>
            </div>
            <div class="code-block">
                <strong>Diferen√ßas entre tipos de Query:</strong><br><br>
                <strong>Derived Query:</strong> Spring gera SQL automaticamente baseado no nome do m√©todo<br>
                ‚Ä¢ Vantagem: Simples, sem c√≥digo SQL<br>
                ‚Ä¢ Desvantagem: Limitado a queries simples<br><br>

                <strong>JPQL (Java Persistence Query Language):</strong> SQL orientado a objetos<br>
                ‚Ä¢ Vantagem: Trabalha com entidades Java, n√£o tabelas<br>
                ‚Ä¢ Usa: "Livro l" em vez de "livro", "l.autor.id" em vez de "autor_id"<br>
                ‚Ä¢ Independente do banco de dados<br><br>

                <strong>Native Query:</strong> SQL puro do banco de dados<br>
                ‚Ä¢ Vantagem: Acesso total aos recursos do banco<br>
                ‚Ä¢ Desvantagem: Dependente do banco, usa nomes f√≠sicos das colunas<br>
                ‚Ä¢ Usa: "livro" (tabela), "editora_id" (coluna f√≠sica)
            </div>

            <h4>Interfaces de Proje√ß√£o:</h4>
            <p class="description">
                O sistema usa interfaces para proje√ß√µes de queries que retornam dados agregados:
            </p>
            <ul>
                <li><strong>EditoraLivroCount:</strong> Interface com getNome() e getTotal() para estat√≠sticas de livros</li>
                <li><strong>EditoraAutorCount:</strong> Interface com getNome() e getTotal() para estat√≠sticas de autores</li>
            </ul>
            <div class="code-block">
                Proje√ß√µes permitem retornar apenas campos espec√≠ficos em vez de entidades completas,<br>
                otimizando queries de agrega√ß√£o e relat√≥rios.
            </div>
        </div>

        <div class="dev-section">
            <h2>üîç Queries Detalhadas</h2>
            <p class="description">
                Explica√ß√£o aprofundada de cada query implementada no sistema, incluindo c√≥digo SQL gerado e casos de uso.
            </p>

            <h3>Derived Query 1: Buscar Autores por Nome</h3>
            <div class="code-block">
                <strong>M√©todo:</strong> findByNomeContainingIgnoreCase(String nome)<br>
                <strong>Repository:</strong> AutorRepository<br>
                <strong>SQL Gerado:</strong> SELECT * FROM autor WHERE LOWER(nome) LIKE LOWER('%?%')<br>
                <strong>Uso:</strong> Busca parcial de autores, √∫til para autocomplete e filtros
            </div>

            <h3>Derived Query 2: Buscar Autores por Pa√≠s</h3>
            <div class="code-block">
                <strong>M√©todo:</strong> findByPaisIgnoreCase(String pais)<br>
                <strong>Repository:</strong> AutorRepository<br>
                <strong>SQL Gerado:</strong> SELECT * FROM autor WHERE LOWER(pais) = LOWER(?)<br>
                <strong>Uso:</strong> Filtrar autores por nacionalidade
            </div>

            <h3>Derived Query 3: Buscar Livros por T√≠tulo</h3>
            <div class="code-block">
                <strong>M√©todo:</strong> findByTituloContainingIgnoreCase(String titulo)<br>
                <strong>Repository:</strong> LivroRepository<br>
                <strong>SQL Gerado:</strong> SELECT * FROM livro WHERE LOWER(titulo) LIKE LOWER('%?%')<br>
                <strong>Uso:</strong> Sistema de busca de livros na biblioteca
            </div>

            <h3>JPQL 1: Livros por Autor</h3>
            <div class="code-block">
                <strong>M√©todo:</strong> findByAutorIdJPQL(Long autorId)<br>
                <strong>Repository:</strong> LivroRepository<br>
                <strong>JPQL:</strong> SELECT l FROM Livro l WHERE l.autor.id = :autorId<br>
                <strong>SQL Gerado:</strong> SELECT * FROM livro WHERE autor_id = ?<br>
                <strong>Uso:</strong> Listar todos os livros de um autor espec√≠fico<br>
                <strong>Nota:</strong> Usa navega√ß√£o de objetos (l.autor.id) em vez de join expl√≠cito
            </div>

            <h3>JPQL 2: Livros por Editora</h3>
            <div class="code-block">
                <strong>M√©todo:</strong> findByEditoraIdJPQL(Long editoraId)<br>
                <strong>Repository:</strong> LivroRepository<br>
                <strong>JPQL:</strong> SELECT l FROM Livro l WHERE l.editora.id = :editoraId<br>
                <strong>SQL Gerado:</strong> SELECT * FROM livro WHERE editora_id = ?<br>
                <strong>Uso:</strong> Listar cat√°logo de uma editora espec√≠fica
            </div>

            <h3>JPQL 3: Estat√≠sticas de Livros por Editora</h3>
            <div class="code-block">
                <strong>M√©todo:</strong> listarQuantidadeDeLivrosPorEditora()<br>
                <strong>Repository:</strong> LivroRepository<br>
                <strong>JPQL:</strong> SELECT e.nome AS nome, COUNT(l) AS total<br>
                FROM Livro l JOIN l.editora e<br>
                GROUP BY e.nome<br>
                ORDER BY COUNT(l) DESC<br>
                <strong>Retorno:</strong> List&lt;EditoraLivroCount&gt; (proje√ß√£o)<br>
                <strong>Uso:</strong> Relat√≥rio de produtividade das editoras<br>
                <strong>Nota:</strong> Usa agrega√ß√£o e ordena√ß√£o, retorna apenas nome e total
            </div>

            <h3>JPQL 4: Estat√≠sticas de Autores por Editora</h3>
            <div class="code-block">
                <strong>M√©todo:</strong> listarQuantidadeDeAutoresPorEditora()<br>
                <strong>Repository:</strong> LivroRepository<br>
                <strong>JPQL:</strong> SELECT e.nome AS nome, COUNT(DISTINCT l.autor.id) AS total<br>
                FROM Livro l JOIN l.editora e<br>
                GROUP BY e.id, e.nome<br>
                ORDER BY COUNT(DISTINCT l.autor.id) DESC<br>
                <strong>Retorno:</strong> List&lt;EditoraAutorCount&gt; (proje√ß√£o)<br>
                <strong>Uso:</strong> An√°lise de diversidade de autores por editora<br>
                <strong>Nota:</strong> Usa COUNT(DISTINCT) para contar autores √∫nicos
            </div>

            <h3>Native Query: Contar Livros por Editora</h3>
            <div class="code-block">
                <strong>M√©todo:</strong> countByEditoraIdNative(Long editoraId)<br>
                <strong>Repository:</strong> LivroRepository<br>
                <strong>SQL:</strong> SELECT COUNT(*) FROM livro WHERE editora_id = :editoraId<br>
                <strong>Retorno:</strong> long (n√∫mero primitivo)<br>
                <strong>Uso:</strong> Contagem r√°pida de livros de uma editora<br>
                <strong>Nota:</strong> Usa SQL nativo com nomes f√≠sicos de tabelas/colunas<br>
                <strong>Diferen√ßa:</strong> Mais perform√°tico que JPQL para contagens simples
            </div>
        </div>

        <div class="dev-section">
            <h2>üñºÔ∏è Views (Templates HTML)</h2>
            <p class="description">
                O sistema utiliza Thymeleaf como template engine. Todas as views estendem template.html
                que fornece layout base com header, navega√ß√£o e footer.
            </p>

            <h3>template.html</h3>
            <p class="description">
                <strong>Prop√≥sito:</strong> Layout base do sistema<br>
                <strong>Componentes:</strong>
            </p>
            <ul>
                <li><strong>Header:</strong> Logo da biblioteca, t√≠tulo e navega√ß√£o desktop</li>
                <li><strong>Navega√ß√£o:</strong> Links para In√≠cio, Autores, Editoras, Livros, Queries, Seed</li>
                <li><strong>Container:</strong> √Årea de conte√∫do onde outras views s√£o inseridas</li>
                <li><strong>Footer:</strong> Informa√ß√µes de copyright</li>
            </ul>
            <div class="code-block">
                Usa Thymeleaf Layout Dialect: layout:fragment="conteudo"<br>
                Outras p√°ginas decoram este template e preenchem o fragmento
            </div>

            <h3>index.html</h3>
            <p class="description">
                <strong>Prop√≥sito:</strong> P√°gina inicial do sistema<br>
                <strong>Rota:</strong> / (HomeController)<br>
                <strong>Conte√∫do:</strong>
            </p>
            <ul>
                <li>Hero section com t√≠tulo e descri√ß√£o do sistema</li>
                <li>Grid de 4 cards: Autores, Editoras, Livros, Consultas</li>
                <li>Cada card tem descri√ß√£o e bot√£o de navega√ß√£o</li>
            </ul>

            <h3>autores-lista.html</h3>
            <p class="description">
                <strong>Prop√≥sito:</strong> Listagem de todos os autores<br>
                <strong>Rota:</strong> /autores/view (AutorViewController)<br>
                <strong>Dados:</strong> List&lt;Autor&gt; autores<br>
                <strong>Funcionalidades:</strong>
            </p>
            <ul>
                <li>Tabela com colunas: ID, Nome, Pa√≠s</li>
                <li>Bot√µes de a√ß√£o: Editar e Deletar para cada autor</li>
                <li>Bot√£o "Novo Autor" no topo</li>
                <li>Mensagem quando lista est√° vazia</li>
            </ul>

            <h3>autores-form.html</h3>
            <p class="description">
                <strong>Prop√≥sito:</strong> Formul√°rio de cria√ß√£o/edi√ß√£o de autor<br>
                <strong>Rotas:</strong> /autores/formulario (novo) ou /autores/editar/{id} (edi√ß√£o)<br>
                <strong>Dados:</strong> Autor autor (vazio para novo, preenchido para edi√ß√£o)<br>
                <strong>Campos:</strong>
            </p>
            <ul>
                <li>ID (hidden, apenas em edi√ß√£o)</li>
                <li>Nome (required)</li>
                <li>Pa√≠s</li>
            </ul>
            <div class="code-block">
                Submete para: POST /autores/salvar<br>
                Usa th:object="${autor}" e th:field para binding
            </div>

            <h3>editoras-lista.html</h3>
            <p class="description">
                <strong>Prop√≥sito:</strong> Listagem de todas as editoras<br>
                <strong>Rota:</strong> /editoras/view (EditoraViewController)<br>
                <strong>Dados:</strong> List&lt;Editora&gt; editoras<br>
                <strong>Estrutura:</strong> Similar a autores-lista.html
            </p>
            <ul>
                <li>Tabela com: ID, Nome, Cidade</li>
                <li>A√ß√µes: Editar e Deletar</li>
                <li>Bot√£o "Nova Editora"</li>
            </ul>

            <h3>editoras-form.html</h3>
            <p class="description">
                <strong>Prop√≥sito:</strong> Formul√°rio de cria√ß√£o/edi√ß√£o de editora<br>
                <strong>Rotas:</strong> /editoras/formulario ou /editoras/editar/{id}<br>
                <strong>Campos:</strong> ID (hidden), Nome (required), Cidade<br>
                <strong>Submete para:</strong> POST /editoras/salvar
            </p>

            <h3>livros-lista.html</h3>
            <p class="description">
                <strong>Prop√≥sito:</strong> Listagem de todos os livros<br>
                <strong>Rota:</strong> /livros/view (LivroViewController)<br>
                <strong>Dados:</strong> List&lt;Livro&gt; livros<br>
                <strong>Funcionalidades:</strong>
            </p>
            <ul>
                <li>Tabela com: ID, T√≠tulo, Ano, ISBN, Autor, Editora</li>
                <li>Exibe nome do autor e editora (navega√ß√£o de objetos)</li>
                <li>A√ß√µes: Editar e Deletar</li>
                <li>Bot√£o "Novo Livro"</li>
            </ul>

            <h3>livros-form.html</h3>
            <p class="description">
                <strong>Prop√≥sito:</strong> Formul√°rio de cria√ß√£o/edi√ß√£o de livro<br>
                <strong>Rotas:</strong> /livros/formulario ou /livros/editar/{id}<br>
                <strong>Dados:</strong> Livro livro, List&lt;Autor&gt; autores, List&lt;Editora&gt; editoras<br>
                <strong>Campos:</strong>
            </p>
            <ul>
                <li>ID (hidden)</li>
                <li>T√≠tulo (required)</li>
                <li>Ano de Publica√ß√£o</li>
                <li>ISBN</li>
                <li>Autor (dropdown select, required)</li>
                <li>Editora (dropdown select, required)</li>
            </ul>
            <div class="code-block">
                Submete para: POST /livros/salvar<br>
                Envia autorId e editoraId separadamente<br>
                Dropdowns populados com th:each sobre listas de autores/editoras
            </div>

            <h3>queries.html</h3>
            <p class="description">
                <strong>Prop√≥sito:</strong> Interface para executar queries de demonstra√ß√£o<br>
                <strong>Rota:</strong> /queries (QueryController)<br>
                <strong>Dados:</strong> todosAutores, todasEditoras, todosPaises, resultados (opcional)<br>
                <strong>Funcionalidades:</strong>
            </p>
            <ul>
                <li>6 formul√°rios diferentes, um para cada tipo de query</li>
                <li>Query 1: Buscar autores por nome (input text)</li>
                <li>Query 2: Buscar autores por pa√≠s (dropdown)</li>
                <li>Query 3: Livros por autor (dropdown de autores)</li>
                <li>Query 4: Estat√≠sticas de autores por editora (sem par√¢metros)</li>
                <li>Query 5: Contar livros por editora (dropdown de editoras)</li>
                <li>Query 6: Livros por editora (dropdown de editoras)</li>
                <li>√Årea de resultados que exibe dados retornados</li>
                <li>Badges indicando tipo de query (Derived, JPQL, Native)</li>
            </ul>
            <div class="code-block">
                Cada formul√°rio submete para: POST /queries/executar/{tipo}<br>
                Resultados exibidos na mesma p√°gina usando Thymeleaf conditionals<br>
                Suporta diferentes tipos de resultado: listas, contagens, estat√≠sticas
            </div>

            <h3>query-executor.html</h3>
            <p class="description">
                <strong>Prop√≥sito:</strong> P√°gina alternativa para executar queries individuais<br>
                <strong>Rota:</strong> /queries/executar/{queryType} (QueryController)<br>
                <strong>Uso:</strong> Demonstra√ß√£o educacional de queries espec√≠ficas
            </p>

            <h3>seed.html</h3>
            <p class="description">
                <strong>Prop√≥sito:</strong> Interface para gerenciar dados de teste<br>
                <strong>Rota:</strong> /seed (SeedController)<br>
                <strong>Dados:</strong> totalAutores, totalEditoras, totalLivros<br>
                <strong>Funcionalidades:</strong>
            </p>
            <ul>
                <li>Exibe contadores de registros atuais</li>
                <li>Bot√£o "Popular Banco" - cria dados de exemplo</li>
                <li>Bot√£o "Limpar Banco" - remove todos os dados</li>
                <li>Mensagens de sucesso/erro usando flash attributes</li>
                <li>Avisos de seguran√ßa antes de a√ß√µes destrutivas</li>
            </ul>
            <div class="code-block">
                Popular: POST /seed/populate (cria 5 autores, 4 editoras, 12 livros)<br>
                Limpar: POST /seed/clear (deleta tudo respeitando foreign keys)<br>
                Usa RedirectAttributes para mensagens flash
            </div>

            <h3>desenvolvimento.html (esta p√°gina)</h3>
            <p class="description">
                <strong>Prop√≥sito:</strong> Documenta√ß√£o t√©cnica completa do sistema<br>
                <strong>Rota:</strong> /dev (DevController)<br>
                <strong>Conte√∫do:</strong> Explica√ß√µes detalhadas de controllers, repositories, queries e views<br>
                <strong>P√∫blico-alvo:</strong> Desenvolvedores e testadores
            </p>
        </div>

        <div class="dev-section">
            <h2>üèóÔ∏è Arquitetura do Sistema</h2>
            <p class="description">
                O sistema segue uma arquitetura em camadas t√≠pica de aplica√ß√µes Spring Boot:
            </p>

            <h3>Camadas da Aplica√ß√£o</h3>
            <div class="table-container">
                <table>
                    <tr>
                        <th>Camada</th>
                        <th>Responsabilidade</th>
                        <th>Componentes</th>
                    </tr>
                    <tr>
                        <td><strong>Presentation</strong></td>
                        <td>Interface com usu√°rio</td>
                        <td>Controllers (@Controller, @RestController), Views (HTML)</td>
                    </tr>
                    <tr>
                        <td><strong>Business</strong></td>
                        <td>L√≥gica de neg√≥cio</td>
                        <td>Controllers (valida√ß√µes, regras)</td>
                    </tr>
                    <tr>
                        <td><strong>Persistence</strong></td>
                        <td>Acesso a dados</td>
                        <td>Repositories (JpaRepository)</td>
                    </tr>
                    <tr>
                        <td><strong>Domain</strong></td>
                        <td>Modelo de dados</td>
                        <td>Entities (Autor, Editora, Livro)</td>
                    </tr>
                </table>
            </div>

            <h3>Fluxo de Requisi√ß√£o</h3>
            <div class="code-block">
                1. <strong>Cliente</strong> faz requisi√ß√£o HTTP (browser ou API client)<br>
                2. <strong>Controller</strong> recebe requisi√ß√£o e valida dados<br>
                3. <strong>Repository</strong> √© chamado para acessar banco de dados<br>
                4. <strong>JPA/Hibernate</strong> executa SQL no banco<br>
                5. <strong>Dados</strong> retornam atrav√©s das camadas<br>
                6. <strong>Controller</strong> prepara resposta (JSON ou View)<br>
                7. <strong>Cliente</strong> recebe resposta
            </div>

            <h3>Padr√µes Utilizados</h3>
            <ul>
                <li><strong>Repository Pattern:</strong> Abstra√ß√£o do acesso a dados</li>
                <li><strong>DTO Pattern:</strong> LivroDTO para transfer√™ncia de dados</li>
                <li><strong>MVC Pattern:</strong> Model-View-Controller para web</li>
                <li><strong>REST Pattern:</strong> APIs RESTful com verbos HTTP</li>
                <li><strong>Dependency Injection:</strong> Inje√ß√£o via construtor</li>
                <li><strong>Exception Handling:</strong> GlobalExceptionHandler centralizado</li>
            </ul>

            <h3>Relacionamentos entre Entidades</h3>
            <div class="code-block">
                <strong>Livro</strong> N:1 <strong>Autor</strong> (ManyToOne)<br>
                ‚Ä¢ Um livro tem um autor<br>
                ‚Ä¢ Um autor pode ter v√°rios livros<br>
                ‚Ä¢ Campo: autor_id (foreign key)<br><br>

                <strong>Livro</strong> N:1 <strong>Editora</strong> (ManyToOne)<br>
                ‚Ä¢ Um livro tem uma editora<br>
                ‚Ä¢ Uma editora pode ter v√°rios livros<br>
                ‚Ä¢ Campo: editora_id (foreign key)<br><br>

                <strong>Integridade Referencial:</strong><br>
                ‚Ä¢ N√£o √© poss√≠vel deletar autor com livros associados<br>
                ‚Ä¢ Livros devem ter autor e editora (optional = false)
            </div>
        </div>

        <div class="dev-section">
            <h2>‚öôÔ∏è Tecnologias Utilizadas</h2>
            <div class="table-container">
                <table>
                    <tr>
                        <th>Tecnologia</th>
                        <th>Vers√£o</th>
                        <th>Uso</th>
                    </tr>
                    <tr>
                        <td>Spring Boot</td>
                        <td>3.x</td>
                        <td>Framework principal da aplica√ß√£o</td>
                    </tr>
                    <tr>
                        <td>Spring Data JPA</td>
                        <td>3.x</td>
                        <td>Persist√™ncia e acesso a dados</td>
                    </tr>
                    <tr>
                        <td>Hibernate</td>
                        <td>6.x</td>
                        <td>ORM (implementa√ß√£o JPA)</td>
                    </tr>
                    <tr>
                        <td>Thymeleaf</td>
                        <td>3.x</td>
                        <td>Template engine para views</td>
                    </tr>
                    <tr>
                        <td>H2 Database</td>
                        <td>2.x</td>
                        <td>Banco de dados em mem√≥ria (dev)</td>
                    </tr>
                    <tr>
                        <td>Jakarta Validation</td>
                        <td>3.x</td>
                        <td>Valida√ß√£o de dados (@NotBlank, @Valid)</td>
                    </tr>
                    <tr>
                        <td>Maven</td>
                        <td>3.x</td>
                        <td>Gerenciamento de depend√™ncias</td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="dev-section">
            <h2>üì° Resumo de Endpoints</h2>

            <h3>REST API (JSON)</h3>
            <div class="code-block">
                <strong>Autores:</strong><br>
                GET    /autores           - Lista todos<br>
                GET    /autores/{id}      - Busca por ID<br>
                POST   /autores           - Cria novo<br>
                PUT    /autores/{id}      - Atualiza<br>
                DELETE /autores/{id}      - Deleta<br><br>

                <strong>Editoras:</strong><br>
                GET    /editoras          - Lista todas<br>
                GET    /editoras/{id}     - Busca por ID<br>
                POST   /editoras          - Cria nova<br>
                PUT    /editoras/{id}     - Atualiza<br>
                DELETE /editoras/{id}     - Deleta<br><br>

                <strong>Livros:</strong><br>
                GET    /livros            - Lista todos<br>
                GET    /livros/{id}       - Busca por ID<br>
                GET    /livros/search?titulo=X - Busca por t√≠tulo<br>
                POST   /livros            - Cria novo<br>
                PUT    /livros/{id}       - Atualiza<br>
                DELETE /livros/{id}       - Deleta<br><br>

                <strong>Queries (API):</strong><br>
                GET /queries/api/derived/autores-por-nome?nome=X<br>
                GET /queries/api/derived/autores-por-pais?pais=X<br>
                GET /queries/api/jpql/livros-por-autor?autorId=X<br>
                GET /queries/api/jpql/estatisticas-editora<br>
                GET /queries/api/native/contar-livros-editora?editoraId=X<br>
                GET /queries/api/jpql/livros-por-editora?editoraId=X
            </div>

            <h3>Web Interface (HTML)</h3>
            <div class="code-block">
                GET  /                      - P√°gina inicial<br>
                GET  /autores/view          - Lista autores<br>
                GET  /autores/formulario    - Formul√°rio novo autor<br>
                GET  /autores/editar/{id}   - Formul√°rio editar autor<br>
                POST /autores/salvar        - Salva autor<br>
                GET  /autores/deletar/{id}  - Deleta autor<br><br>

                GET  /editoras/view         - Lista editoras<br>
                GET  /editoras/formulario   - Formul√°rio nova editora<br>
                GET  /editoras/editar/{id}  - Formul√°rio editar editora<br>
                POST /editoras/salvar       - Salva editora<br>
                GET  /editoras/deletar/{id} - Deleta editora<br><br>

                GET  /livros/view           - Lista livros<br>
                GET  /livros/formulario     - Formul√°rio novo livro<br>
                GET  /livros/editar/{id}    - Formul√°rio editar livro<br>
                POST /livros/salvar         - Salva livro<br>
                GET  /livros/deletar/{id}   - Deleta livro<br><br>

                GET  /queries               - Interface de queries<br>
                POST /queries/executar/*    - Executa queries<br><br>

                GET  /seed                  - Interface de seed<br>
                POST /seed/populate         - Popula banco<br>
                POST /seed/clear            - Limpa banco<br><br>

                GET  /dev                   - Esta documenta√ß√£o
            </div>
        </div>

        <div class="dev-section">
            <p style="text-align: center; color: #7f8c8d; font-style: italic;">
                Documenta√ß√£o gerada para auxiliar no desenvolvimento e testes do Sistema de Biblioteca.<br>
                Para voltar ao sistema, use o menu de navega√ß√£o acima.
            </p>
        </div>
    </div>
</div>
</body>
</html>
